
(function(){var shareBox={init:function(config){if(!config){return}
var css=document.createElement('link');css.type='text/css';css.rel='stylesheet';css.href='/scripts/sharebox/shareBox.css';document.getElementsByTagName('head')[0].appendChild(css);var tabObj={tools:'<a class="tools" id="J_shareBox_tools" hidefocus="true" href="javascript:;">工具</a>',share:'<a class="share" id="J_shareBox_share" hidefocus="true" href="javascript:;">分享</a>',top:'<a class="top" id="J_shareBox_top" hidefocus="true" href="javascript:;">顶部</a>'};var tabCode='',show=config.show;if(!show){for(var t in tabObj){tabCode+=tabObj[t]}}else{for(var i=0;i<show.length;i++){tabCode+=(!tabObj[show[i]]?'':tabObj[show[i]])}}
var htmlCode='<div id="J_shareBox" class="shareBox">'+'<div class="hd"><span class="t">分享</span><a href="javascript:;" title="关闭分享版块" id="J_shareBox_close" class="s"></a></div>'+'<div class="bd" id="J_shreBox_bd">'+'数据加载中...'+'</div>'+'</div>'+'<div class="tab">'+tabCode+'</div>';if(document.getElementById('fixBox')){document.getElementById('fixBox').innerHTML=htmlCode}
this.fixBox=document.getElementById('fixBox');this.tools=document.getElementById('J_shareBox_tools');this.share=document.getElementById('J_shareBox_share');this.top=document.getElementById('J_shareBox_top');this.back=document.getElementById('J_shareBox_back');this.shareBox=document.getElementById('J_shareBox');this.close=document.getElementById('J_shareBox_close');this.shareBox_content=document.getElementById('J_shreBox_bd');this.clickTools=config.clickTools||function(){};this.addEvent(this.tools,'click',this.bind(this.clickTools,this));this.addEvent(this.share,'click',this.bind(this.toggleShare,this));this.addEvent(this.close,'click',this.bind(this.clickClose,this));this.addEvent(this.top,'click',this.bind(this.clickTop,this));this.addEvent(document,'click',this.bind(this.clickOut,this));this.fixLeft();if(document.attachEvent&&window.ActiveXObject&&!window.XMLHttpRequest){if(this.needHide()){this.fixBox.style.display="none"}
document.documentElement.style.background="url(about:blank) no-repeat fixed";this.addEvent(window,'scroll',this.bind(this.scrollStart,this));this.addEvent(window,'scroll',this.bind(this.ie6fix,this));this.addEvent(window,'resize',this.bind(this.ie6fix,this))}else{this.addEvent(window,'resize',this.bind(this.otherFix,this))}},shareInfoLoaded:function(){var shareList='<ul class="shareList">'+'<li><a href="javascript:;" onclick="shareDefault(\'sina\')" class="share-sina">新浪微博</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'qq\')" class="share-qq">QQ空间</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'qqwb\')" class="share-qqwb">腾讯微博</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'kx\')" class="share-kx">开心网</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'rr\')" class="share-rr">人人网</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'163\')" class="share-163">网易微博</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'sohu\')" class="share-sohu">搜狐微博</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'tb\')" class="share-tb">百度贴吧</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'sc\')" class="share-sc">百度收藏</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'db\')" class="share-db">豆瓣</a></li>'+'<li><a href="javascript:;" onclick="shareDefault(\'fx\')" class="share-fx">飞信</a></li>'+'</ul>';this.shareBox_content.innerHTML=shareList;this.loadShareInfoOk=true},clickClose:function(){this.shareBox.style.display="none";this.removeClass(this.share,'active')},clickShare:function(){this.shareBox.style.display="block";this.addClass(this.share,'active');if(!this.loadShareInfoOk){this.loadScript('/script/sharebox/pc_open_share_info.js',this.bind(this.shareInfoLoaded,this))}},clickTop:function(){this.goTop()},toggleShare:function(){var regClassName=new RegExp("(^|\\s+)active(\\s+|$)");if(regClassName.test(this.share.className)){this.clickClose()}else{this.clickShare()}},removeClass:function(ele,className){var result=ele.className.replace(className,'');ele.className=result.split(' ').join(' ')},addClass:function(ele,className){var regClassName=new RegExp("(^|\\s+)"+className+"(\\s+|$)");if(regClassName.test(ele.className)!==true){ele.className=ele.className.split(' ').concat(className).join(' ')}},bind:function(handle,context){return function(){handle.apply(context,arguments)}},needHide:function(){return document.documentElement.clientWidth<1250},ie6fix:function(){if(this.needHide()){this.fixBox.style.display="none";return}else{this.fixBox.style.display="block"}
var newTop=(document.documentElement.scrollTop+document.body.scrollTop)+document.documentElement.clientHeight-27;this.fixBox.style.top=newTop+'px';this.fixLeft()},otherFix:function(){this.fixLeft()},fixLeft:function(){var newLeft=document.documentElement.clientWidth/2+500+5;this.fixBox.style.left=newLeft+'px'},scrollStart:function(){var self=this;clearTimeout(self.scrollTimer);self.fixBox.style.display="none";this.scrollTopOld=document.documentElement.scrollTop+document.body.scrollTop;this.scrollTimer=setTimeout(function(){var scrollTopNew=document.documentElement.scrollTop+document.body.scrollTop;if(!self.needHide()&&scrollTopNew===self.scrollTopOld){clearTimeout(self.scrollTimer);self.fixBox.style.display="block"}else{setTimeout(arguments.callee,2000)}},1000)},loadScript:function(src,callback){var js=document.createElement('script');js.src=src;js.onreadystatechange=js.onload=function(){if(!js.readyState||js.readyState=='loaded'||js.readyState=='complete'){callback()}};document.getElementsByTagName('head')[0].appendChild(js)},goTop:function(){document.documentElement.scrollTop=document.body.scrollTop=0},clickOut:function(e){if(!this.share){return}
e=window.event||e;var target=e.target||e.srcElement;while(target!=undefined){if(target.id==="fixBox"){return}
target=target.parentNode}
this.clickClose()},addEvent:function(ele,event,handle){if(!ele){return}
if(ele.addEventListener!=undefined){ele.addEventListener(event,handle,false)}else if(ele.attachEvent!=undefined){ele.attachEvent('on'+event,handle)}}};window.shareBox=shareBox})();